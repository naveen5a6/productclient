package com.home.productclient.service;


import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;
import org.springframework.stereotype.Service;

@Service
public class ArrowResponseCalculations {


    public static  void main(String[] a) throws ParseException {
        ArrowResponseCalculations arrowResponseCalculations=new ArrowResponseCalculations();
        arrowResponseCalculations.cal();
    }

    public void cal() throws ParseException {

        String arrowResponse="{\"apiMetadata\":{\"traceId\":\"AMT1234JSLocal\",\"createDate\":\"2022-09-13 12:59:06\",\"lastUpdated\":\"2022-09-13 12:59:06\",\"updatedBy\":{\"channelId\":\"162a6d40\",\"channelName\":\"RIDER\",\"clientId\":\"client Id\",\"clientName\":\"client name\"}},\"responses\":[{\"requestId\":\"265fe795-a8c5-4866-9f1a-abe18ce56cb2\",\"responseId\":\"480F2704-39C3-11ED-81C3-0106BAE83907\",\"journeyLegs\":[{\"legDetails\":{\"from\":\"WAS\",\"scheduledDepartureTime\":\"2022-12-23T16:05:00\",\"to\":\"LAX\",\"scheduledArrivalTime\":\"2022-12-26T08:00:00\",\"consistAmenities\":{\"baggageCar\":true,\"cafeCar\":true,\"obla\":true},\"inventories\":[{\"name\":\"BV\",\"price\":\"40.00\",\"baseRBD\":\"BV\"},{\"name\":\"QX\",\"price\":\"78.00\",\"baseRBD\":\"QX\"}],\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"value\"},\"currentPrice\":\"251.00\",\"railFare\":\"251.00\",\"accomCharge\":\"0.00\"},{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"flex\"},\"currentPrice\":\"492.00\",\"railFare\":\"492.00\",\"accomCharge\":\"0.00\"},{\"serviceClass\":{\"class\":\"premium\"},\"currentPrice\":\"1359.00\",\"railFare\":\"315.00\",\"accomCharge\":\"1044.00\"}]},\"travelLegs\":[{\"travelService\":{\"serviceNumber\":\"29\"},\"from\":\"WAS\",\"scheduledDepartureTime\":\"2022-12-23T16:05:00\",\"to\":\"CHI\",\"scheduledArrivalTime\":\"2022-12-24T08:45:00\",\"elapsedTime\":\"P00DT17H40M\",\"consistAmenities\":{\"baggageCar\":true,\"cafeCar\":true,\"trayMeal\":true,\"obla\":true},\"inventories\":[{\"name\":\"BV\",\"available\":2},{\"name\":\"QX\",\"available\":5}],\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"value\",\"rbdCode\":\"YD\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":17,\"connectType\":\"T\",\"farePlan\":\"DOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"flex\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":52,\"availableCapacity\":58,\"connectType\":\"T\",\"farePlan\":\"YOFC\"},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":6,\"availableCapacity\":10,\"roomsRequired\":1,\"connectType\":\"T\",\"farePlan\":\"BOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":52,\"availableCapacity\":58},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"LY\",\"baseRBD\":\"LY\",\"rbdClass\":\"coach\"},\"currentAvailability\":7,\"availableCapacity\":10},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":6,\"availableCapacity\":10,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"DS\",\"baseRBD\":\"DS\",\"rbdClass\":\"premium\"},\"currentAvailability\":4,\"availableCapacity\":5,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"FS\",\"baseRBD\":\"FS\",\"rbdClass\":\"premium\"},\"currentAvailability\":0,\"availableCapacity\":1}]},{\"travelService\":{\"serviceNumber\":\"3\"},\"from\":\"CHI\",\"scheduledDepartureTime\":\"2022-12-24T14:50:00\",\"to\":\"LAX\",\"scheduledArrivalTime\":\"2022-12-26T08:00:00\",\"elapsedTime\":\"P01DT19H10M\",\"consistAmenities\":{\"baggageCar\":true,\"cafeCar\":true,\"diningCar\":true,\"obla\":true},\"inventories\":[{\"name\":\"BV\",\"available\":1},{\"name\":\"QX\",\"available\":5}],\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"value\",\"rbdCode\":\"YD\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":87,\"farePlan\":\"DOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"flex\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":107,\"availableCapacity\":124,\"farePlan\":\"YOFC\"},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"EC\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":1,\"roomsRequired\":1,\"farePlan\":\"BOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":107,\"availableCapacity\":124},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"LY\",\"baseRBD\":\"LY\",\"rbdClass\":\"coach\"},\"currentAvailability\":6,\"availableCapacity\":8},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":31,\"availableCapacity\":35,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"DS\",\"baseRBD\":\"DS\",\"rbdClass\":\"premium\"},\"currentAvailability\":8,\"availableCapacity\":10,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"FS\",\"baseRBD\":\"FS\",\"rbdClass\":\"premium\"},\"currentAvailability\":0,\"availableCapacity\":2}]}]},{\"legDetails\":{\"from\":\"WAS\",\"scheduledDepartureTime\":\"2022-12-23T10:59:00\",\"to\":\"LAX\",\"scheduledArrivalTime\":\"2022-12-26T08:00:00\",\"consistAmenities\":{\"baggageCar\":true,\"cafeCar\":true},\"inventories\":[{\"name\":\"BV\",\"price\":\"40.00\",\"baseRBD\":\"BV\"},{\"name\":\"QX\",\"price\":\"78.00\",\"baseRBD\":\"QX\"}],\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"value\"},\"currentPrice\":\"251.00\",\"railFare\":\"251.00\",\"accomCharge\":\"0.00\"},{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"flex\"},\"currentPrice\":\"492.00\",\"railFare\":\"492.00\",\"accomCharge\":\"0.00\"},{\"serviceClass\":{\"class\":\"premium\"},\"currentPrice\":\"1359.00\",\"railFare\":\"315.00\",\"accomCharge\":\"1044.00\"}]},\"travelLegs\":[{\"travelService\":{\"serviceNumber\":\"51\"},\"from\":\"WAS\",\"scheduledDepartureTime\":\"2022-12-23T10:59:00\",\"to\":\"CHI\",\"scheduledArrivalTime\":\"2022-12-24T10:00:00\",\"elapsedTime\":\"P01DT00H01M\",\"consistAmenities\":{\"baggageCar\":true,\"cafeCar\":true,\"trayMeal\":true,\"wifi\":true},\"inventories\":[{\"name\":\"BV\",\"available\":6},{\"name\":\"QX\",\"available\":5}],\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"value\",\"rbdCode\":\"YD\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":31,\"connectType\":\"T\",\"farePlan\":\"DOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"flex\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":99,\"availableCapacity\":114,\"connectType\":\"T\",\"farePlan\":\"YOFC\"},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":3,\"availableCapacity\":12,\"roomsRequired\":1,\"connectType\":\"T\",\"farePlan\":\"BOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":99,\"availableCapacity\":114},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":3,\"availableCapacity\":12,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"DS\",\"baseRBD\":\"DS\",\"rbdClass\":\"premium\"},\"currentAvailability\":0,\"availableCapacity\":2}]},{\"travelService\":{\"serviceNumber\":\"3\"},\"from\":\"CHI\",\"scheduledDepartureTime\":\"2022-12-24T14:50:00\",\"to\":\"LAX\",\"scheduledArrivalTime\":\"2022-12-26T08:00:00\",\"elapsedTime\":\"P01DT19H10M\",\"consistAmenities\":{\"baggageCar\":true,\"cafeCar\":true,\"diningCar\":true,\"obla\":true},\"inventories\":[{\"name\":\"BV\",\"available\":1},{\"name\":\"QX\",\"available\":5}],\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"value\",\"rbdCode\":\"YD\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":87,\"farePlan\":\"DOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"subClass\":\"flex\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":107,\"availableCapacity\":124,\"farePlan\":\"YOFC\"},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"EC\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":1,\"roomsRequired\":1,\"farePlan\":\"BOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":107,\"availableCapacity\":124},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"LY\",\"baseRBD\":\"LY\",\"rbdClass\":\"coach\"},\"currentAvailability\":6,\"availableCapacity\":8},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":31,\"availableCapacity\":35,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"DS\",\"baseRBD\":\"DS\",\"rbdClass\":\"premium\"},\"currentAvailability\":8,\"availableCapacity\":10,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"FS\",\"baseRBD\":\"FS\",\"rbdClass\":\"premium\"},\"currentAvailability\":0,\"availableCapacity\":2}]}]},{\"legDetails\":{\"from\":\"WAS\",\"scheduledDepartureTime\":\"2022-12-23T16:05:00\",\"to\":\"LAX\",\"scheduledArrivalTime\":\"2022-12-27T02:15:00\",\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\"},\"currentPrice\":\"1601.75\",\"railFare\":\"387.75\",\"accomCharge\":\"1214.00\"}]},\"travelLegs\":[{\"travelService\":{\"serviceNumber\":\"29\"},\"from\":\"WAS\",\"scheduledDepartureTime\":\"2022-12-23T16:05:00\",\"to\":\"CHI\",\"scheduledArrivalTime\":\"2022-12-24T08:45:00\",\"elapsedTime\":\"P00DT17H40M\",\"consistAmenities\":{\"baggageCar\":true,\"cafeCar\":true,\"trayMeal\":true,\"obla\":true},\"inventories\":[{\"name\":\"BV\",\"available\":2},{\"name\":\"QX\",\"available\":5}],\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":6,\"availableCapacity\":10,\"roomsRequired\":1,\"connectType\":\"T\",\"farePlan\":\"BOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":52,\"availableCapacity\":58},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"LY\",\"baseRBD\":\"LY\",\"rbdClass\":\"coach\"},\"currentAvailability\":7,\"availableCapacity\":10},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":6,\"availableCapacity\":10,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"DS\",\"baseRBD\":\"DS\",\"rbdClass\":\"premium\"},\"currentAvailability\":4,\"availableCapacity\":5,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"FS\",\"baseRBD\":\"FS\",\"rbdClass\":\"premium\"},\"currentAvailability\":0,\"availableCapacity\":1}]},{\"travelService\":{\"serviceNumber\":\"5\"},\"from\":\"CHI\",\"scheduledDepartureTime\":\"2022-12-24T14:00:00\",\"to\":\"SAC\",\"scheduledArrivalTime\":\"2022-12-26T14:13:00\",\"elapsedTime\":\"P02DT02H13M\",\"consistAmenities\":{\"baggageCar\":true,\"cafeCar\":true,\"diningCar\":true,\"obla\":true},\"inventories\":[{\"name\":\"BV\",\"available\":6},{\"name\":\"QX\",\"available\":4}],\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"EA\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":18,\"roomsRequired\":1,\"farePlan\":\"BOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":105,\"availableCapacity\":122},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"LY\",\"baseRBD\":\"LY\",\"rbdClass\":\"coach\"},\"currentAvailability\":8,\"availableCapacity\":10},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":29,\"availableCapacity\":35,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"DS\",\"baseRBD\":\"DS\",\"rbdClass\":\"premium\"},\"currentAvailability\":6,\"availableCapacity\":10,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"FS\",\"baseRBD\":\"FS\",\"rbdClass\":\"premium\"},\"currentAvailability\":1,\"availableCapacity\":2,\"roomsRequired\":1}]},{\"travelService\":{\"serviceNumber\":\"3718\",\"operatingCarrierCode\":\"AC\",\"busIndicator\":true,\"restricted\":true,\"equipmentCode\":\"BUS\"},\"from\":\"SAC\",\"scheduledDepartureTime\":\"2022-12-26T18:05:00\",\"to\":\"SKN\",\"scheduledArrivalTime\":\"2022-12-26T19:10:00\",\"elapsedTime\":\"P00DT01H05M\",\"consistAmenities\":{\"baggageCar\":true,\"wifi\":true,\"obla\":true},\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"T\",\"baseRBD\":\"T\",\"rbdClass\":\"coach\"},\"currentAvailability\":40,\"availableCapacity\":40,\"farePlan\":\"NLF1\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"T\",\"baseRBD\":\"T\",\"rbdClass\":\"coach\"},\"currentAvailability\":40,\"availableCapacity\":40}]},{\"travelService\":{\"serviceNumber\":\"718\"},\"from\":\"SKN\",\"scheduledDepartureTime\":\"2022-12-26T19:23:00\",\"to\":\"BFD\",\"scheduledArrivalTime\":\"2022-12-26T23:57:00\",\"elapsedTime\":\"P00DT04H34M\",\"consistAmenities\":{\"wifi\":true},\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":320,\"availableCapacity\":320,\"connectType\":\"S\",\"farePlan\":\"UOPJ\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":320,\"availableCapacity\":320}]},{\"travelService\":{\"serviceNumber\":\"5818\",\"operatingServiceNumber\":\"5818\",\"operatingCarrierCode\":\"AC\",\"busIndicator\":true,\"restricted\":true,\"equipmentCode\":\"BUS\"},\"from\":\"BFD\",\"scheduledDepartureTime\":\"2022-12-26T23:59:00\",\"to\":\"LAX\",\"scheduledArrivalTime\":\"2022-12-27T02:15:00\",\"elapsedTime\":\"P00DT02H16M\",\"consistAmenities\":{\"wifi\":true,\"obla\":true},\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"T\",\"baseRBD\":\"T\",\"rbdClass\":\"coach\"},\"currentAvailability\":45,\"availableCapacity\":45,\"farePlan\":\"UOPJ\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"T\",\"baseRBD\":\"T\",\"rbdClass\":\"coach\"},\"currentAvailability\":45,\"availableCapacity\":45}]}]},{\"legDetails\":{\"from\":\"WAS\",\"scheduledDepartureTime\":\"2022-12-23T10:59:00\",\"to\":\"LAX\",\"scheduledArrivalTime\":\"2022-12-27T02:15:00\",\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\"},\"currentPrice\":\"1601.75\",\"railFare\":\"387.75\",\"accomCharge\":\"1214.00\"}]},\"travelLegs\":[{\"travelService\":{\"serviceNumber\":\"51\"},\"from\":\"WAS\",\"scheduledDepartureTime\":\"2022-12-23T10:59:00\",\"to\":\"CHI\",\"scheduledArrivalTime\":\"2022-12-24T10:00:00\",\"elapsedTime\":\"P01DT00H01M\",\"consistAmenities\":{\"baggageCar\":true,\"cafeCar\":true,\"trayMeal\":true,\"wifi\":true},\"inventories\":[{\"name\":\"BV\",\"available\":6},{\"name\":\"QX\",\"available\":5}],\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":3,\"availableCapacity\":12,\"roomsRequired\":1,\"connectType\":\"T\",\"farePlan\":\"BOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":99,\"availableCapacity\":114},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":3,\"availableCapacity\":12,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"DS\",\"baseRBD\":\"DS\",\"rbdClass\":\"premium\"},\"currentAvailability\":0,\"availableCapacity\":2}]},{\"travelService\":{\"serviceNumber\":\"5\"},\"from\":\"CHI\",\"scheduledDepartureTime\":\"2022-12-24T14:00:00\",\"to\":\"SAC\",\"scheduledArrivalTime\":\"2022-12-26T14:13:00\",\"elapsedTime\":\"P02DT02H13M\",\"consistAmenities\":{\"baggageCar\":true,\"cafeCar\":true,\"diningCar\":true,\"obla\":true},\"inventories\":[{\"name\":\"BV\",\"available\":6},{\"name\":\"QX\",\"available\":4}],\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"EA\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":18,\"roomsRequired\":1,\"farePlan\":\"BOF1\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":105,\"availableCapacity\":122},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"LY\",\"baseRBD\":\"LY\",\"rbdClass\":\"coach\"},\"currentAvailability\":8,\"availableCapacity\":10},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"ES\",\"baseRBD\":\"ES\",\"rbdClass\":\"premium\"},\"currentAvailability\":29,\"availableCapacity\":35,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"DS\",\"baseRBD\":\"DS\",\"rbdClass\":\"premium\"},\"currentAvailability\":6,\"availableCapacity\":10,\"roomsRequired\":1},{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"FS\",\"baseRBD\":\"FS\",\"rbdClass\":\"premium\"},\"currentAvailability\":1,\"availableCapacity\":2,\"roomsRequired\":1}]},{\"travelService\":{\"serviceNumber\":\"3718\",\"operatingCarrierCode\":\"AC\",\"busIndicator\":true,\"restricted\":true,\"equipmentCode\":\"BUS\"},\"from\":\"SAC\",\"scheduledDepartureTime\":\"2022-12-26T18:05:00\",\"to\":\"SKN\",\"scheduledArrivalTime\":\"2022-12-26T19:10:00\",\"elapsedTime\":\"P00DT01H05M\",\"consistAmenities\":{\"baggageCar\":true,\"wifi\":true,\"obla\":true},\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"T\",\"baseRBD\":\"T\",\"rbdClass\":\"coach\"},\"currentAvailability\":40,\"availableCapacity\":40,\"farePlan\":\"NLF1\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"T\",\"baseRBD\":\"T\",\"rbdClass\":\"coach\"},\"currentAvailability\":40,\"availableCapacity\":40}]},{\"travelService\":{\"serviceNumber\":\"718\"},\"from\":\"SKN\",\"scheduledDepartureTime\":\"2022-12-26T19:23:00\",\"to\":\"BFD\",\"scheduledArrivalTime\":\"2022-12-26T23:57:00\",\"elapsedTime\":\"P00DT04H34M\",\"consistAmenities\":{\"wifi\":true},\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":320,\"availableCapacity\":320,\"connectType\":\"S\",\"farePlan\":\"UOPJ\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"Y\",\"baseRBD\":\"Y\",\"rbdClass\":\"coach\"},\"currentAvailability\":320,\"availableCapacity\":320}]},{\"travelService\":{\"serviceNumber\":\"5818\",\"operatingServiceNumber\":\"5818\",\"operatingCarrierCode\":\"AC\",\"busIndicator\":true,\"restricted\":true,\"equipmentCode\":\"BUS\"},\"from\":\"BFD\",\"scheduledDepartureTime\":\"2022-12-26T23:59:00\",\"to\":\"LAX\",\"scheduledArrivalTime\":\"2022-12-27T02:15:00\",\"elapsedTime\":\"P00DT02H16M\",\"consistAmenities\":{\"wifi\":true,\"obla\":true},\"priceAvailabilityDetails\":[{\"serviceClass\":{\"class\":\"premium\",\"rbdCode\":\"T\",\"baseRBD\":\"T\",\"rbdClass\":\"coach\"},\"currentAvailability\":45,\"availableCapacity\":45,\"farePlan\":\"UOPJ\"},{\"serviceClass\":{\"class\":\"coach\",\"rbdCode\":\"T\",\"baseRBD\":\"T\",\"rbdClass\":\"coach\"},\"currentAvailability\":45,\"availableCapacity\":45}]}]}]}]}";
        JSONObject json = getArrowResponseJsonObject(arrowResponse);
        JSONArray responsesArray = getResponseJsonArray(json);
        JSONArray journeyLegsArray = getJourneyLegsArray(responsesArray,0);
        JSONArray travelLegsArray = getTravelLegsArray(journeyLegsArray,0);
        CalculateDateTimeDiff calculateDateTimeDiff=new CalculateDateTimeDiff();

        String departureCity = getObjectValue(travelLegsArray,0,"from");
        String departureDateTime= getObjectValue(travelLegsArray,0,"scheduledDepartureTime");

        String updatedDepartureDateTime=calculateDateTimeDiff.getCurrentDateTimeByCityAddHours(departureCity,2,"hours");
        String updatedDepartureDateTimeMinutes=calculateDateTimeDiff.getCurrentDateTimeByCityAddHours(departureCity,25,"minutes");
        System.out.println(json);
        System.out.println(updatedDepartureDateTimeMinutes);

        updateJsonObject(json, responsesArray, journeyLegsArray, travelLegsArray, updatedDepartureDateTime,0);

        System.out.println(json);
    }

    private static String getObjectValue(JSONArray travelLegsArray, int index, String objectName) {
        String departureCity= (String) ((JSONObject) travelLegsArray.get(index)).get(objectName);
        return departureCity;
    }

    private static void updateJsonObject(JSONObject json, JSONArray responsesArray, JSONArray journeyLegsArray, JSONArray travelLegsArray, String updatedDepartureDateTime,int index) {
        ((JSONObject) travelLegsArray.get(index)).put("scheduledDepartureTime", updatedDepartureDateTime);
        ((JSONObject) journeyLegsArray.get(index)).put("travelLegs", travelLegsArray);
        ((JSONObject) responsesArray.get(index)).put("journeyLegs", journeyLegsArray);

        json.put("responses", responsesArray);
    }

    private static JSONArray getTravelLegsArray(JSONArray journeyLegsArray,int index) {
        JSONArray travelLegsArray= (JSONArray) ((JSONObject) journeyLegsArray.get(index)).get("travelLegs");
        return travelLegsArray;
    }



    private static JSONArray getJourneyLegsArray(JSONArray responsesArray, int index) {
        JSONArray journeyLegsArray= (JSONArray) ((JSONObject) responsesArray.get(index)).get("journeyLegs");
        return journeyLegsArray;
    }

    private static JSONArray getResponseJsonArray(JSONObject json) {
        JSONArray responsesArray= (JSONArray) json.get("responses");
        return responsesArray;
    }

    private static JSONObject getArrowResponseJsonObject(String arrowResponse) throws ParseException {
        JSONParser parser = new JSONParser();
        JSONObject json = (JSONObject) parser.parse(arrowResponse);
        return json;
    }
}
